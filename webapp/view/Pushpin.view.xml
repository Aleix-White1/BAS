<mvc:View
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:core="sap.ui.core"
	xmlns:f="sap.ui.layout.form"
	xmlns:tmb="zui5controlstmb.controls"
	displayBlock="true"
	controllerName="zdigitalticket.controller.Pushpin">
	<Page showHeader="false" class="colorBackground">
		<customData>
			<core:CustomData
				key="italic"
				value="true"
				writeToDom="{= !${localBinding>/today} }"
			/>
		</customData>
		<content>
			<ScrollContainer vertical="true" class="sapUiSmallMargin">
				<HBox justifyContent="SpaceBetween">
					<Text text="{
						parts: [
							'localBinding>/Date'
						],
						formatter: '.formatDate'
					}"/>
					<Link text="&lt; {i18n>yesterday}" press="onChangeDay" textAlign="End" visible="{localBinding>/today}"/>
					<Link text="{i18n>today} >" press="onChangeDay" textAlign="End" visible="{= !${localBinding>/today} }"/>
				</HBox>
<!--
				<HBox >
					<Button text="navToStation" press="onStartStationClicked" />
					<Button text="navToTrain" press="onTrainStationClicked" />
				</HBox>
-->
				<VBox class="formFilters">
					<HBox justifyContent="SpaceBetween" alignItems="Center">
						<HBox>
							<VBox width="40px" height="40px" class="lineLogo" justifyContent="Center" alignItems="Center">
								<customData>
									<core:CustomData
										key="line"
										value="{localBinding>/Line}"
										writeToDom="true"
									/>
								</customData>
								<Text text="L{localBinding>/Line}"/>
							</VBox>
							<VBox>
								<Text text="{
									parts: [
										'i18n>zone',
										'localBinding>/Zone'
									],
									formatter: 'jQuery.sap.formatMessage'
								}"/>
								<Text text="{
									parts: [
										'i18n>shift',
										'localBinding>/Shift'
									],
									formatter: 'jQuery.sap.formatMessage'
								}"/>
							</VBox>
						</HBox>
						<core:Icon src="sap-icon://download" size="20px" press="onDownloadTicket" visible="{= ${localBinding>/today} }"/> <!-- TODO: L'admin no hauria de poder veure aquest botó -->
					</HBox>
					<Text text="{i18n>zone.activities.for.today}"/>
				</VBox>
				<Text text=" "/>  <!-- Spacer -->
				<Table class="tableWithNoData">
					<columns>
						<Column hAlign="Center" width="25%">
							<Text text="{localBinding>/ServiceId}"/>
						</Column>
						<Column hAlign="Center" width="20%">
							<Text text="{localBinding>/EmployeeId}"/>
						</Column>
						<Column hAlign="Center" width="55%">
							<Text text="{localBinding>/EmployeeName}"/>
						</Column>
					</columns>
				</Table>
				<Table id="dataTable" items="{localBinding>/PieceSet}">
					<columns>
						<Column width="15%" hAlign="Center">
							<Text text="{i18n>table.header.HI}"/>
						</Column>
						<Column width="14%" hAlign="Center">
							<Text text="{i18n>table.header.EI}"/>
						</Column>
						<Column width="14%" hAlign="Center">
							<Text text="{i18n>table.header.VI}"/>
						</Column>
						<Column width="14%" hAlign="Center">
							<Text text="{i18n>table.header.TE}"/>
						</Column>
						<Column width="15%" hAlign="Center">
							<Text text="{i18n>table.header.HF}"/>
						</Column>
						<Column width="14%" hAlign="Center">
							<Text text="{i18n>table.header.EF}"/>
						</Column>
						<Column width="14%" hAlign="Center">
							<Text text="{i18n>table.header.VF}"/>
						</Column>
					</columns>
					<items>
						<ColumnListItem>
							<cells>
								<Text text="{localBinding>StartTime}"/>
								<HBox justifyContent="Center">
<!-- TODO: Diseño o usabilidad? Quién ganará? -->
									<Text text="{localBinding>StartStation}" visible="{= !${localBinding>/today} }"/>
									<Link text="{localBinding>StartStation}" visible="{localBinding>/today}" press="onStartStationClicked"/>
									<!-- tmb:ButtonText text="{localBinding>StartStation}" type="Transparent" toggle="{localBinding>/today}" press="onStartStationClicked" / -->
								</HBox>
								<Text text="{localBinding>StartTrack}"/>
								<HBox justifyContent="Center">
									<Text text="{localBinding>TrainStation}" visible="{= !${localBinding>/today} || !${localBinding>IsTrainStationClickable} }"/>
									<Link text="{localBinding>TrainStation}" visible="{= ${localBinding>/today} &amp;&amp; ${localBinding>IsTrainStationClickable} }" press="onTrainStationClicked"/>
								</HBox>
								<Text text="{localBinding>EndTime}"/>
								<Text text="{localBinding>EndStation}"/>
								<Text text="{localBinding>EndTrack}"/>
							</cells>
						</ColumnListItem>
					</items>
				</Table>
				<VBox>
					<Text text=" "/>  <!-- Spacer -->
					<Text text=" "/>  <!-- Spacer -->
				</VBox>
			</ScrollContainer>
		</content>
	</Page>
</mvc:View>
